{"theory":[{"type":"heading","content":"1. Future là gì?"},{"type":"text","content":"Hãy tưởng tượng bạn vào quán cà phê. Khi bạn gọi món, nhân viên thu ngân đưa cho bạn một cái Rung (hoặc hóa đơn) và bảo bạn ra bàn ngồi chờ."},{"type":"image","content":"https://images.unsplash.com/photo-1556742502-ec7c0e9f34b1?auto=format&fit=crop&q=80&w=1000"},{"type":"text","content":"Trong Dart, \"cái Rung\" đó chính là Future. Nó là một lời hứa rằng: \"Trong tương lai, tôi sẽ trả lại cho bạn một ly cà phê (dữ liệu) hoặc báo lỗi nếu hết cà phê\"."},{"type":"heading","content":"2. Tại sao cần Asynchronous?"},{"type":"note","content":"⚠️ QUAN TRỌNG: Nếu không dùng Future (Bất đồng bộ), ứng dụng của bạn sẽ bị ĐƠ (Freeze) hoàn toàn trong lúc tải dữ liệu từ mạng. Người dùng sẽ không thể bấm nút hay cuộn trang được."},{"type":"text","content":"Để giải quyết vấn đề này, chúng ta dùng từ khóa async và await."},{"type":"code","content":"// Hàm giả lập việc tải dữ liệu mất 3 giây\nFuture<String> downloadFile() async {\n  // Giả vờ chờ 3 giây\n  await Future.delayed(Duration(seconds: 3));\n  return 'File Content';\n}"},{"type":"heading","content":"3. Video minh họa Event Loop"},{"type":"video","content":"https://www.youtube.com/watch?v=vl_AaCgudcY"},{"type":"heading","content":"4. Mô phỏng luồng chạy (Visual)"},{"type":"code_stepper","content":"{\n  \"code\": \"void main() {\\n  print('A. Bắt đầu Main');\\n  goiMon();\\n  print('C. Kết thúc Main (Đi làm việc khác)');\\n}\\n\\nFuture<void> goiMon() async {\\n  print('B. Đang pha chế...');\\n  await Future.delayed(Duration(seconds: 2));\\n  print('D. Đồ uống đã xong!');\\n}\",\n  \"steps\": [\n    {\n      \"line\": 2,\n      \"note\": \"Chương trình bắt đầu. In dòng A.\",\n      \"vars\": {\"output\": \"A. Bắt đầu Main\"}\n    },\n    {\n      \"line\": 3,\n      \"note\": \"Gọi hàm 'goiMon'. Nhảy xuống dòng 7.\",\n      \"vars\": {}\n    },\n    {\n      \"line\": 7,\n      \"note\": \"Bắt đầu thực hiện hàm async. In dòng B.\",\n      \"vars\": {\"output\": \"B. Đang pha chế...\"}\n    },\n    {\n      \"line\": 8,\n      \"note\": \"Gặp 'await': TẠM DỪNG hàm này lại. Trả quyền điều khiển cho Main.\",\n      \"vars\": {\"status\": \"Đang chờ 2s...\"}\n    },\n    {\n      \"line\": 4,\n      \"note\": \"Hàm Main không bị chặn, chạy tiếp việc của nó. In dòng C.\",\n      \"vars\": {\"output\": \"C. Kết thúc Main\"}\n    },\n    {\n      \"line\": 5,\n      \"note\": \"Hàm Main xong. Nhưng App chưa tắt vì vẫn còn Future đang chờ.\",\n      \"vars\": {}\n    },\n    {\n      \"line\": 8,\n      \"note\": \"Sau 2 giây, Future hoàn thành. Quay lại hàm 'goiMon'.\",\n      \"vars\": {\"status\": \"Xong\"}\n    },\n    {\n      \"line\": 9,\n      \"note\": \"Thực hiện nốt công việc còn lại. In dòng D.\",\n      \"vars\": {\"output\": \"D. Đồ uống đã xong!\"}\n    }\n  ]\n}"}],"quizzes":[],"practices":[]}